{"ast":null,"code":"import{useState,useEffect}from'react';import{BrowserProvider,Contract,formatEther,parseEther}from'ethers';import'./App.css';import Navbar from'./components/Navbar';import NFTCard from'./components/NFTCard';import CreateNFT from'./components/CreateNFT';import contractABI from'./contracts/SimpleNFTMarketplace.json';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[account,setAccount]=useState('');const[nfts,setNfts]=useState([]);const[contract,setContract]=useState(null);const[loading,setLoading]=useState(true);const contractAddress=\"0xDc64a140Aa3E981100a9becA4E685f962f0cF6C9\";const connectWallet=async()=>{try{if(!window.ethereum){alert(\"Please install MetaMask!\");return;}const accounts=await window.ethereum.request({method:'eth_requestAccounts'});setAccount(accounts[0]);const provider=new BrowserProvider(window.ethereum);const signer=await provider.getSigner();const nftContract=new Contract(contractAddress,contractABI.abi,signer);setContract(nftContract);await loadNFTs(nftContract);}catch(error){console.error(\"Error connecting wallet:\",error);}};const loadNFTs=async contract=>{try{setLoading(true);const items=await contract.getAllNFTs();setNfts(items);}catch(error){console.error(\"Error loading NFTs:\",error);}finally{setLoading(false);}};const handleCreateNFT=()=>{loadNFTs(contract);};useEffect(()=>{const checkWalletConnection=async()=>{if(window.ethereum){const accounts=await window.ethereum.request({method:'eth_accounts'});if(accounts.length>0){setAccount(accounts[0]);const provider=new BrowserProvider(window.ethereum);const signer=await provider.getSigner();const nftContract=new Contract(contractAddress,contractABI.abi,signer);setContract(nftContract);await loadNFTs(nftContract);}}};checkWalletConnection();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(Navbar,{account:account,connectWallet:connectWallet}),/*#__PURE__*/_jsxs(\"main\",{className:\"main-content\",children:[/*#__PURE__*/_jsx(CreateNFT,{contract:contract,onCreate:handleCreateNFT}),/*#__PURE__*/_jsxs(\"section\",{className:\"marketplace-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"NFT Marketplace\"}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading NFTs...\"}):/*#__PURE__*/_jsx(\"div\",{className:\"nft-grid\",children:nfts.map((nft,index)=>/*#__PURE__*/_jsx(NFTCard,{nft:nft,contract:contract,account:account,onBuy:()=>loadNFTs(contract)},index))})]})]})]});}export default App;","map":{"version":3,"names":["useState","useEffect","BrowserProvider","Contract","formatEther","parseEther","Navbar","NFTCard","CreateNFT","contractABI","jsx","_jsx","jsxs","_jsxs","App","account","setAccount","nfts","setNfts","contract","setContract","loading","setLoading","contractAddress","connectWallet","window","ethereum","alert","accounts","request","method","provider","signer","getSigner","nftContract","abi","loadNFTs","error","console","items","getAllNFTs","handleCreateNFT","checkWalletConnection","length","className","children","onCreate","map","nft","index","onBuy"],"sources":["C:/ProjectsAll/nft-marketplace/client/src/App.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { BrowserProvider, Contract, formatEther, parseEther } from 'ethers';\nimport './App.css';\nimport Navbar from './components/Navbar';\nimport NFTCard from './components/NFTCard';\nimport CreateNFT from './components/CreateNFT';\nimport contractABI from './contracts/SimpleNFTMarketplace.json';\n\nfunction App() {\n  const [account, setAccount] = useState('');\n  const [nfts, setNfts] = useState([]);\n  const [contract, setContract] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  const contractAddress = \"0xDc64a140Aa3E981100a9becA4E685f962f0cF6C9\";\n\n  const connectWallet = async () => {\n    try {\n      if (!window.ethereum) {\n        alert(\"Please install MetaMask!\");\n        return;\n      }\n\n      const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n      setAccount(accounts[0]);\n      \n      const provider = new BrowserProvider(window.ethereum);\n      const signer = await provider.getSigner();\n      const nftContract = new Contract(contractAddress, contractABI.abi, signer);\n      setContract(nftContract);\n      \n      await loadNFTs(nftContract);\n    } catch (error) {\n      console.error(\"Error connecting wallet:\", error);\n    }\n  };\n\n  const loadNFTs = async (contract) => {\n    try {\n      setLoading(true);\n      const items = await contract.getAllNFTs();\n      setNfts(items);\n    } catch (error) {\n      console.error(\"Error loading NFTs:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCreateNFT = () => {\n    loadNFTs(contract);\n  };\n\n  useEffect(() => {\n    const checkWalletConnection = async () => {\n      if (window.ethereum) {\n        const accounts = await window.ethereum.request({ method: 'eth_accounts' });\n        if (accounts.length > 0) {\n          setAccount(accounts[0]);\n          const provider = new BrowserProvider(window.ethereum);\n          const signer = await provider.getSigner();\n          const nftContract = new Contract(contractAddress, contractABI.abi, signer);\n          setContract(nftContract);\n          await loadNFTs(nftContract);\n        }\n      }\n    };\n\n    checkWalletConnection();\n  }, []);\n\n  return (\n    <div className=\"app\">\n      <Navbar account={account} connectWallet={connectWallet} />\n      \n      <main className=\"main-content\">\n        <CreateNFT contract={contract} onCreate={handleCreateNFT} />\n        \n        <section className=\"marketplace-section\">\n          <h2>NFT Marketplace</h2>\n          {loading ? (\n            <div className=\"loading\">Loading NFTs...</div>\n          ) : (\n            <div className=\"nft-grid\">\n              {nfts.map((nft, index) => (\n                <NFTCard \n                  key={index}\n                  nft={nft}\n                  contract={contract}\n                  account={account}\n                  onBuy={() => loadNFTs(contract)}\n                />\n              ))}\n            </div>\n          )}\n        </section>\n      </main>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}